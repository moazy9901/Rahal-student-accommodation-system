<p-toast></p-toast>

<div
  class="flex flex-col md:flex-row w-full bg-gradient-to-br from-[#f7f2ff] to-white dark:from-gray-900 dark:to-gray-800"
>
  <!-- LEFT IMAGE -->
  <div class=" absolute md:static w-full h-[120vh] md:p-7  md:w-1/2  min-h-full order-2 md:order-1">
    <img
      src="asset/auth/20251129_2105_image.png"
      class="w-full h-full rounded-2xl object-cove  shadow-lg"
      alt="Register Image"
    />
    <div class="md:hidden absolute inset-0 bg-black/50"></div>
  </div>

  <!-- RIGHT FORM -->
  <div
    class="relative w-full z-30  md:w-1/2 flex items-center justify-center p-8 order-1 md:order-2"
  >
    <div
      class="w-full max-w-xl bg-white/40 dark:bg-gray-900/40 backdrop-blur-xl shadow-xl rounded-3xl p-8 md:p-10 border border-white/30 dark:border-white/10"
    >
      <h2
        class="text-4xl font-extrabold mb-8 text-center bg-gradient-to-r from-[#5e1fbf] to-[#9b4dff] text-transparent bg-clip-text"
      >
        Register
      </h2>

      <form [formGroup]="registerForm" (ngSubmit)="submit()" class="space-y-6">
        <!-- Profile Image Upload -->
        <div class="flex flex-col items-center mb-6">
          <label class="text-gray-700 dark:text-gray-300 font-medium mb-2"
            >Profile Image</label
          >

          <label
            class="relative w-28 h-28 cursor-pointer rounded-full border-2 border-dashed border-[#5e1fbf]/40 flex items-center justify-center bg-white/30 dark:bg-black/30 text-gray-700 dark:text-gray-300 hover:border-[#7a30e3] hover:shadow-lg transition"
          >
            <!-- Show preview if image selected -->
            <img
              *ngIf="previewImage"
              [src]="previewImage"
              class="w-full h-full object-cover rounded-full"
              alt="Profile Preview"
            />

            <!-- Placeholder text if no image -->
            <span *ngIf="!previewImage" class="text-center text-sm"
              >Click to upload</span
            >

            <!-- Hidden file input -->
            <input
              type="file"
              accept="image/*"
              (change)="onFileChange($event)"
              class="absolute inset-0 w-full h-full opacity-0 rounded-full cursor-pointer"
            />
          </label>
        </div>
        <!-- Full Name -->
        <div>
          <input
            type="text"
            placeholder="Full Name"
            formControlName="name"
            class="w-full bg-white/30 dark:bg-black/30 px-5 py-3.5 rounded-xl border border-[#5e1fbf]/40 text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-[#5e1fbf] outline-none transition"
          />
          <small
            *ngIf="f.name.touched && f.name.invalid"
            class="text-red-500 text-sm mt-1 block"
          >
            <span *ngIf="f.name.errors['required']">Name is required</span>
            <span *ngIf="f.name.errors['minlength']">Minimum 3 characters</span>
          </small>
        </div>

        <!-- Email -->
        <div>
          <input
            type="email"
            placeholder="Email"
            formControlName="email"
            class="w-full bg-white/30 dark:bg-black/30 px-5 py-3.5 rounded-xl border border-[#5e1fbf]/40 text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-[#5e1fbf] outline-none transition"
          />
          <small
            *ngIf="f.email.touched && f.email.invalid"
            class="text-red-500 text-sm mt-1 block"
          >
            <span *ngIf="f.email.errors['required']">Email is required</span>
            <span *ngIf="f.email.errors['email']">Invalid email format</span>
          </small>
        </div>

        <!-- Password -->
        <div class="relative">
          <input
            [type]="passwordVisible ? 'text' : 'password'"
            placeholder="Password"
            formControlName="password"
            class="w-full bg-white/30 dark:bg-black/30 px-5 py-3.5 pr-12 rounded-xl border border-[#5e1fbf]/40 text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-[#5e1fbf] outline-none transition"
          />
          <!-- Eye Icon -->
          <button
            type="button"
            (click)="passwordVisible = !passwordVisible"
            class="absolute right-4 top-1/2 -translate-y-1/2 text-[#5e1fbf] hover:text-[#4a18a2] transition"
          >
            <i
              class="fa"
              [ngClass]="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"
            ></i>
          </button>
          <small
            *ngIf="f.password.touched && f.password.invalid"
            class="text-red-500 text-sm mt-1 block"
          >
            <span *ngIf="f.password.errors['required']"
              >Password is required</span
            >
            <span *ngIf="f.password.errors['minlength']"
              >Minimum 8 characters</span
            >
          </small>
        </div>

        <!-- Role Select -->
        <div>
          <select
            class="w-full bg-white/30 dark:bg-black/30 px-5 py-3.5 rounded-xl border border-[#5e1fbf]/40 text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-[#5e1fbf] outline-none transition"
            formControlName="role"
          >
            <option class="text-black" value="student">Student</option>
            <option class="text-black" value="owner">Owner</option>
          </select>
        </div>

        <!-- Submit -->
        <button
          type="submit"
          [disabled]="isSubmitting || registerForm.invalid"
          class="w-full text-white py-3.5 rounded-xl text-base font-semibold bg-gradient-to-r from-[#5e1fbf] to-[#7a30e3] hover:opacity-90 transition shadow-lg disabled:opacity-50"
        >
          {{ isSubmitting ? 'Registering...' : 'Register' }}
        </button>
      </form>
    </div>
  </div>
</div>
