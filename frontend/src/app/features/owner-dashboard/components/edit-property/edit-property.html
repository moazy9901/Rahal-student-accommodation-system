<p-toast></p-toast>

<div class="w-full from-[#f7f2ff] to-white dark:bg-gray-900">

  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex justify-center items-center h-screen">
    <div class="text-center">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#9233FA] mx-auto mb-4"></div>
      <p class="text-gray-600 dark:text-gray-300">Loading property...</p>
    </div>
  </div>

  <!-- RIGHT FORM -->
  <div *ngIf="!isLoading" class="relative w-full z-30  flex items-center justify-center p-6 order-1 md:order-2">
    <div class="w-full overflow-hidden  bg-white/40 dark:bg-gray-900/40 backdrop-blur-xl shadow-xl rounded-3xl p-8 md:p-10 border border-white/30 dark:border-white/10 overflow-y-auto">
      <h2 class="text-4xl font-extrabold mb-2 text-center bg-gradient-to-r from-[#9233FA] to-[#9233fa] text-transparent bg-clip-text">
        Edit Property
      </h2>
      <p class="text-center text-gray-600 dark:text-gray-300 mb-8">Update your property details</p>

      <form [formGroup]="propertyForm" (ngSubmit)="submit()" class="space-y-5">
<!-- SECTION 1: Basic Information -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-xl font-bold text-[#9233FA] mb-6 flex items-center gap-2">
    <i class="fas fa-info-circle text-[#9233FA]"></i>
    Basic Information
  </h3>

  <!-- Title -->
  <div class="mb-5">
    <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2">
      <i class="fas fa-heading text-[#9233FA]"></i>
      Property Title <span class="text-red-500">*</span>
    </label>
    <input
      type="text"
      formControlName="title"
      placeholder="Enter the property title"
      class="w-full bg-gray-100 dark:bg-gray-900 px-5 py-3 rounded-xl
             border border-[#9233FA]/40 text-gray-900 dark:text-white shadow-sm
             focus:ring-2 focus:ring-[#9233FA] outline-none transition"
    />
    <small *ngIf="f.title.touched && f.title.invalid" class="text-red-500 text-sm mt-1 block">
      <span *ngIf="f.title.errors['required']">Title is required</span>
      <span *ngIf="f.title.errors['minlength']">Minimum 5 characters</span>
    </small>
    <small *ngIf="f.title.errors?.server" class="text-red-500 text-sm mt-1 block">
      {{ f.title.errors.server }}
    </small>
  </div>

  <!-- Description -->
  <div class="mb-5">
    <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2">
      <i class="fas fa-align-left text-[#9233FA]"></i>
      Property Description <span class="text-red-500">*</span>
    </label>
    <textarea
      formControlName="description"
      placeholder="Write a detailed property description..."
      rows="4"
      class="w-full bg-gray-100 dark:bg-gray-900 px-5 py-3 rounded-xl
             border border-[#9233FA]/40 text-gray-900 dark:text-white shadow-sm
             focus:ring-2 focus:ring-[#9233FA] outline-none transition resize-none"
    ></textarea>
    <small *ngIf="f.description.touched && f.description.invalid" class="text-red-500 text-sm mt-1 block">
      <span *ngIf="f.description.errors['required']">Description is required</span>
      <span *ngIf="f.description.errors['minlength']">Minimum 20 characters</span>
    </small>
    <small *ngIf="f.description.errors?.server" class="text-red-500 text-sm mt-1 block">
      {{ f.description.errors.server }}
    </small>
  </div>

  <!-- Price -->
    <div>
      <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fas fa-dollar-sign text-[#9233FA]"></i>
        Price per Month <span class="text-red-500">*</span>
      </label>
      <input
        type="number"
        formControlName="price"
        placeholder="e.g. 1500"
        class="w-full bg-gray-100 dark:bg-gray-900 px-5 py-3 rounded-xl
               border border-[#9233FA]/40 text-gray-900 dark:text-white shadow-sm
               focus:ring-2 focus:ring-[#9233FA] outline-none transition"
      />
      <small *ngIf="f.price.touched && f.price.invalid" class="text-red-500 text-sm mt-1 block">
        Price is required
      </small>
      <small *ngIf="f.price.errors?.min" class="text-red-500 text-sm mt-1 block">
        Price must be higher than zero
      </small>
      <small *ngIf="f.price.errors?.server" class="text-red-500 text-sm mt-1 block">
        {{ f.price.errors.server }}
      </small>
    </div>
</div>



      <!-- SECTION 2: Location -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-xl font-bold text-[#9233FA] mb-6 flex items-center gap-2">
    <i class="fas fa-location-dot text-[#9233FA]"></i>
    Location
  </h3>

  <!-- Address -->
  <div class="mb-5">
    <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">
      Street Address <span class="text-red-500">*</span>
    </label>

    <div class="relative">
      <i class="fas fa-map-pin absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400"></i>

      <input
        type="text"
        formControlName="address"
        placeholder="Enter street address"
        class="w-full bg-gray-100 dark:bg-gray-900 pl-12 pr-5 py-3 rounded-xl
               border border-[#9233FA]/40 text-gray-900 dark:text-white shadow-sm
               focus:ring-2 focus:ring-[#9233FA] outline-none transition"
      />
    </div>

    <small *ngIf="f.address.touched && f.address.invalid" class="text-red-500 text-sm mt-1 block">
      Address is required
    </small>
    <small *ngIf="f.address.errors?.server" class="text-red-500 text-sm mt-1 block">
      {{ f.address.errors.server }}
    </small>
  </div>

  <!-- City -->
  <div class="mb-5 relative" [class.z-50]="cityOpen">
    <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">
      City <span class="text-red-500">*</span>
    </label>

    <button
      type="button"
      (click)="cityOpen = !cityOpen"
      class="w-full bg-gray-100 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
             text-gray-900 dark:text-white shadow-sm flex justify-between items-center
             focus:ring-2 focus:ring-[#9233FA] outline-none transition"
    >
      <div class="flex items-center gap-2">
        <i class="fas fa-city text-gray-500 dark:text-gray-400"></i>
        {{ selectedCityName || 'Select City' }}
      </div>
      <i class="fa" [ngClass]="cityOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
    </button>

    <!-- City Dropdown -->
    <ul
      *ngIf="cityOpen"
      class="absolute w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700
             rounded-xl shadow-lg overflow-hidden z-50"
    >
      <li
        *ngFor="let city of cities"
        (click)="selectCity(city)"
        class="px-5 py-3 hover:bg-purple-100 dark:hover:bg-gray-700 cursor-pointer
               text-gray-900 dark:text-white flex items-center gap-2"
      >
        <i class="fas fa-location-dot text-[#9233FA]"></i>
        {{ city.name }}
      </li>
    </ul>

    <small *ngIf="f.city_id.touched && f.city_id.invalid" class="text-red-500 text-sm mt-1 block">
      City is required
    </small>
    <small *ngIf="f.city_id.errors?.server" class="text-red-500 text-sm mt-1 block">
      {{ f.city_id.errors.server }}
    </small>
  </div>

  <!-- Area -->
  <div class="mb-5 relative" [class.z-40]="areaOpen">
    <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">
      Area <span class="text-red-500">*</span>
    </label>

    <button
      type="button"
      (click)="areaOpen = !areaOpen"
      [disabled]="!selectedCityId"
      class="w-full bg-gray-100 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
             text-gray-900 dark:text-white shadow-sm flex justify-between items-center
             focus:ring-2 focus:ring-[#9233FA] outline-none transition text-left disabled:opacity-50"
    >
      <div class="flex items-center gap-2">
        <i class="fas fa-location-arrow text-gray-500 dark:text-gray-400"></i>
        {{ selectedAreaName || 'Select Area' }}
      </div>
      <i class="fa" [ngClass]="areaOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
    </button>

    <!-- Area Dropdown -->
    <ul
      *ngIf="areaOpen && getAreaOptions().length > 0"
      class="absolute w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700
             rounded-xl shadow-lg overflow-hidden z-40"
    >
      <li
        *ngFor="let area of getAreaOptions()"
        (click)="selectArea(area)"
        class="px-5 py-3 hover:bg-purple-100 dark:hover:bg-gray-700 cursor-pointer
               text-gray-900 dark:text-white flex items-center gap-2"
      >
        <i class="fas fa-map-location-dot text-[#9233FA]"></i>
        {{ area.name }}
      </li>
    </ul>

    <small *ngIf="f.area_id.touched && f.area_id.invalid" class="text-red-500 text-sm mt-1 block">
      Area is required
    </small>
    <small *ngIf="f.area_id.errors?.server" class="text-red-500 text-sm mt-1 block">
      {{ f.area_id.errors.server }}
    </small>
  </div>
</div>


        <!-- SECTION 3: Property Details -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-lg font-bold text-[#9233FA] mb-4">Property Details</h3>

  <!-- Accommodation Type & Gender -->
  <div class="grid grid-cols-2 gap-4 mb-4">

    <!-- Accommodation Type -->
    <div class="relative w-full" [class.z-30]="accommodationOpen">
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-house-circle-check text-[#9233FA]"></i>
        Accommodation Type
      </label>

      <button
        type="button"
        (click)="accommodationOpen = !accommodationOpen"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm flex justify-between items-center
               focus:ring-2 focus:ring-[#9233FA] outline-none transition text-left text-sm">
        {{ selectedAccommodation || 'Select Type' }}
        <i class="fa" [ngClass]="accommodationOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
      </button>

      <ul
        *ngIf="accommodationOpen"
        class="absolute w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300
               dark:border-gray-700 rounded-xl shadow-lg overflow-hidden z-30">
        <li
          *ngFor="let acc of accommodationTypes"
          (click)="selectAccommodation(acc)"
          class="px-5 py-2 hover:bg-purple-100 dark:hover:bg-gray-700 cursor-pointer
                 text-gray-900 dark:text-white text-sm">
          {{ acc }}
        </li>
      </ul>
    </div>

    <!-- Gender Requirement -->
    <div class="relative w-full" [class.z-20]="genderOpen">
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-venus-mars text-[#9233FA]"></i>
        Gender Preference
      </label>

      <button
        type="button"
        (click)="genderOpen = !genderOpen"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm flex justify-between items-center
               focus:ring-2 focus:ring-[#9233FA] outline-none transition text-left text-sm">

        {{ selectedGender || 'Select Gender' }}
        <i class="fa" [ngClass]="genderOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
      </button>

      <ul
        *ngIf="genderOpen"
        class="absolute w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300
               dark:border-gray-700 rounded-xl shadow-lg overflow-hidden z-20">
        <li
          *ngFor="let gender of genderOptions"
          (click)="selectGender(gender)"
          class="px-5 py-2 hover:bg-purple-100 dark:hover:bg-gray-700 cursor-pointer
                 text-gray-900 dark:text-white text-sm">
          {{ gender | titlecase }}
        </li>
      </ul>
    </div>

  </div>

  <!-- ROOMS / BATHS / SIZE / BEDS / SPOTS / MIN STAY -->
  <div class="grid grid-cols-2 gap-4 mb-4">

    <!-- Total Rooms -->
    <div>
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-door-open text-[#9233FA]"></i>
        Total Rooms
      </label>
      <input
        type="number"
        formControlName="total_rooms"
        placeholder="Total Rooms"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-[#9233FA]
               outline-none transition">
      <small *ngIf="f.total_rooms.touched && f.total_rooms.invalid" class="text-red-500 text-sm mt-1 block">
        Required
      </small>
    </div>

    <!-- Available Rooms -->
    <div>
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-bed text-[#9233FA]"></i>
        Available Rooms
      </label>
      <input
        type="number"
        formControlName="available_rooms"
        placeholder="Available Rooms"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-[#9233FA]
               outline-none transition">
      <small *ngIf="propertyForm.errors?.availableInvalid" class="text-red-500 text-sm mt-1 block">
        Available Rooms cannot exceed Total Rooms
      </small>
    </div>

    <!-- Bathrooms -->
    <div>
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-shower text-[#9233FA]"></i>
        Bathrooms
      </label>
      <input
        type="number"
        formControlName="bathrooms_count"
        placeholder="Bathrooms"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm">
    </div>

    <!-- Beds -->
    <div>
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-bed text-[#9233FA]"></i>
        Beds
      </label>
      <input
        type="number"
        formControlName="beds"
        placeholder="Beds"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm">
    </div>

    <!-- Spots -->
    <div>
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-users text-[#9233FA]"></i>
        Available Spots
      </label>
      <input
        type="number"
        formControlName="available_spots"
        placeholder="Available Spots"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm">
    </div>

    <!-- Size -->
    <div>
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-ruler-combined text-[#9233FA]"></i>
        Size (sqm)
      </label>
      <input
        type="number"
        formControlName="size"
        placeholder="Size (sqm)"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm">
    </div>

    <!-- Minimum Stay -->
    <div>
      <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-calendar-days text-[#9233FA]"></i>
        Minimum Stay (Months)
      </label>
      <input
        type="number"
        formControlName="minimum_stay_months"
        placeholder="Minimum Stay"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
               text-gray-900 dark:text-white shadow-sm">
    </div>

  </div>

  <!-- University -->
  <div class="relative w-full mb-4" [class.z-30]="universityOpen">
    <label class="block mb-1 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
      <i class="fa-solid fa-building-columns text-[#9233FA]"></i>
      University
    </label>

    <button
      type="button"
      (click)="universityOpen = !universityOpen"
      [disabled]="!selectedCityId"
      class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl border border-[#9233FA]/40
             text-gray-900 dark:text-white shadow-sm flex justify-between items-center
             focus:ring-2 focus:ring-[#9233FA] outline-none transition disabled:opacity-50">
      {{ selectedUniversityName || 'Select University' }}
      <i class="fa" [ngClass]="universityOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
    </button>

    <ul
      *ngIf="universityOpen && universities.length > 0"
      class="absolute w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700
             rounded-xl shadow-lg overflow-hidden z-30 max-h-60 overflow-y-auto">
      <li
        *ngFor="let uni of universities"
        (click)="selectUniversity(uni)"
        class="px-5 py-3 hover:bg-purple-100 dark:hover:bg-gray-700 cursor-pointer text-gray-900
               dark:text-white flex items-center gap-2">
        <span>{{ uni.name }}</span>
        <span *ngIf="uni.abbreviation" class="text-xs text-gray-500">({{ uni.abbreviation }})</span>
      </li>
    </ul>

  </div>
</div>


      <!-- SECTION 4: Availability -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-lg font-bold text-[#9233FA] mb-4 flex items-center gap-2">
    <i class="fa-solid fa-calendar-check text-[#9233FA]"></i>
    Availability
  </h3>

  <div class="grid grid-cols-2 gap-4">

    <!-- Available From -->
    <div>
      <label class="block mb-2 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-calendar-day text-[#9233FA]"></i>
        Available From
      </label>

      <input
        type="date"
        formControlName="available_from"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl
               border border-[#9233FA]/40 text-gray-900 dark:text-white shadow-sm
               focus:ring-2 focus:ring-[#9233FA] outline-none transition"
      />

      <small *ngIf="f.available_from.touched && f.available_from.invalid"
             class="text-red-500 text-sm mt-1 block">
        Required
      </small>

      <small *ngIf="f.available_from.errors?.server"
             class="text-red-500 text-sm mt-1 block">
        {{ f.available_from.errors.server }}
      </small>

      <small *ngIf="propertyForm.errors?.fromPastDate"
             class="text-red-500 text-sm mt-1 block">
        Available From date cannot be in the past.
      </small>
    </div>

    <!-- Available Until -->
    <div>
      <label class="block mb-2 text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <i class="fa-solid fa-calendar-plus text-[#9233FA]"></i>
        Available Until
      </label>

      <input
        type="date"
        formControlName="available_to"
        class="w-full bg-gray-200 dark:bg-gray-900 px-5 py-3 rounded-xl
               border border-[#9233FA]/40 text-gray-900 dark:text-white shadow-sm
               focus:ring-2 focus:ring-[#9233FA] outline-none transition"
      />

      <small *ngIf="f.available_to.touched && f.available_to.invalid"
             class="text-red-500 text-sm mt-1 block">
        Required
      </small>

      <small *ngIf="f.available_to.errors?.server"
             class="text-red-500 text-sm mt-1 block">
        {{ f.available_to.errors.server }}
      </small>

      <small *ngIf="propertyForm.errors?.dateInvalid"
             class="text-red-500 text-sm mt-1 block">
        Available Until date must be after Available From date.
      </small>

      <small *ngIf="propertyForm.errors?.toPastDate"
             class="text-red-500 text-sm mt-1 block">
        Available Until date cannot be in the past.
      </small>
    </div>

  </div>
</div>


        <!-- SECTION 5: Amenities -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-lg font-bold text-[#9233FA] mb-4">Amenities</h3>

  <div class="grid grid-cols-2 gap-3">
    <button
      type="button"
      *ngFor="let amenity of amenities"
      (click)="toggleAmenity(amenity.id)"
      [ngClass]="{
        'ring-2 ring-[#9233FA] bg-[#9233FA]/10 text-gray-900 dark:text-white':
          isAmenitySelected(amenity.id),
        'bg-gray-200 dark:bg-gray-900 text-gray-900 dark:text-white':
          !isAmenitySelected(amenity.id)
      }"
      class="p-3 rounded-xl border-2 border-[#9233FA]/40 transition-all duration-150 ease-in-out hover:scale-105 capitalize shadow-sm"
    >
      {{ amenity.name }}
    </button>
  </div>

  <small *ngIf="f.amenities.errors?.server" class="text-red-500 text-sm mt-1 block">
    {{ f.amenities.errors.server }}
  </small>
</div>

<!-- SECTION 5.5: Payment Methods -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-lg font-bold text-[#9233FA] mb-4">Payment Methods</h3>

  <div class="grid grid-cols-3 gap-3">
    <button
      type="button"
      *ngFor="let method of paymentMethods"
      (click)="togglePaymentMethod(method)"
      [ngClass]="{
        'ring-2 ring-[#9233FA] bg-[#9233FA]/10 text-gray-900 dark:text-white':
          isPaymentMethodSelected(method),
        'bg-gray-200 dark:bg-gray-900 text-gray-900 dark:text-white':
          !isPaymentMethodSelected(method)
      }"
      class="p-3 rounded-xl border-2 border-[#9233FA]/40 transition-all duration-150 ease-in-out hover:scale-105 capitalize shadow-sm"
    >
      {{ method.replace('_', ' ') }}
    </button>
  </div>

  <small *ngIf="f.payment_methods.errors?.server" class="text-red-500 text-sm mt-1 block">
    {{ f.payment_methods.errors.server }}
  </small>
</div>

<!-- SECTION 6: Features & Contact -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-lg font-bold text-[#9233FA] mb-4">Features & Contact</h3>

  <!-- Toggles -->
  <div class="grid grid-cols-2 gap-4 mb-4">
    <label class="flex items-center gap-3 cursor-pointer">
      <input
        type="checkbox"
        formControlName="smoking_allowed"
        class="w-5 h-5 rounded border-[#9233FA]/40 accent-[#9233FA]"
      />
      <span class="text-gray-900 dark:text-white">Smoking Allowed</span>
    </label>

    <label class="flex items-center gap-3 cursor-pointer">
      <input
        type="checkbox"
        formControlName="pets_allowed"
        class="w-5 h-5 rounded border-[#9233FA]/40 accent-[#9233FA]"
      />
      <span class="text-gray-900 dark:text-white">Pets Allowed</span>
    </label>

    <label class="flex items-center gap-3 cursor-pointer">
      <input
        type="checkbox"
        formControlName="furnished"
        class="w-5 h-5 rounded border-[#9233FA]/40 accent-[#9233FA]"
      />
      <span class="text-gray-900 dark:text-white">Furnished</span>
    </label>
  </div>

  <!-- Contact Information (Read-only - Owner Info) -->
  <div class="grid grid-cols-2 gap-4">
    <div class="relative">
      <input
        type="tel"
        placeholder="Contact Phone"
        formControlName="contact_phone"
        [disabled]="true"
        class="w-full bg-gray-100 dark:bg-gray-800 px-5 py-3 rounded-xl border border-gray-300/40 text-gray-600 dark:text-gray-400 shadow-sm outline-none cursor-not-allowed"
      />
      <small class="text-gray-500 text-xs mt-1 block">Owner phone number (read-only)</small>
    </div>

    <div>
      <input
        type="email"
        placeholder="Contact Email"
        formControlName="contact_email"
        [disabled]="true"
        class="w-full bg-gray-100 dark:bg-gray-800 px-5 py-3 rounded-xl border border-gray-300/40 text-gray-600 dark:text-gray-400 shadow-sm outline-none cursor-not-allowed"
      />
      <small class="text-gray-500 text-xs mt-1 block">Owner email address (read-only)</small>
    </div>
  </div>
</div>


        <!-- SECTION 7: Images -->
<div class="border-b border-[#9233FA]/20 pb-6">
  <h3 class="text-lg font-bold text-[#9233FA] mb-4">Property Images</h3>

  <!-- Upload Button -->
  <label
    class="relative block w-full p-6 border-2 border-dashed border-[#9233FA]/40 rounded-xl cursor-pointer
           hover:border-[#9233FA] hover:bg-[#9233fa]/5 hover:shadow-lg transition
           bg-gray-200 dark:bg-gray-900 text-center"
  >
    <div class="text-gray-700 dark:text-gray-300 pointer-events-none">
      <i class="fa fa-cloud-upload text-3xl mb-3 block"></i>
      <span class="font-medium">Click to upload more images</span>
    </div>

    <input
      type="file"
      multiple
      accept="image/*"
      (change)="onFileChange($event)"
      class="absolute inset-0 opacity-0 cursor-pointer"
    />
  </label>

  <small *ngIf="f.images.errors?.server" class="text-red-500 text-sm mt-1 block">
    {{ f.images.errors.server }}
  </small>

  <!-- Image Previews -->
  <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mt-5">
    <div
      *ngFor="let image of previewImages; let i = index"
      class="relative group bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden shadow-md"
    >
      <img
        [src]="image"
        alt="Preview"
        class="w-full h-36 object-cover rounded-xl transition-transform duration-200 group-hover:scale-105"
      />

      <!-- Delete Button -->
      <button
        type="button"
        (click)="removeImage(i)"
        class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow
               opacity-0 group-hover:opacity-100 transition"
      >
        <i class="fa fa-times text-sm"></i>
      </button>
    </div>
  </div>
</div>


        <!-- Submit Buttons -->
        <div class="flex gap-4">
          <button
            type="submit"
            [disabled]="isSubmitting || propertyForm.invalid"
            class="flex-1 text-white py-3.5 rounded-xl text-base font-semibold bg-gradient-to-r from-[#9233FA] to-[#9233fa] hover:opacity-90 transition shadow-lg disabled:opacity-50 mt-6"
          >
            {{ isSubmitting ? 'Updating Property...' : 'Update Property' }}
          </button>
          <button
            type="button"
            (click)="cancel()"
            class="flex-1 text-[#9233FA] py-3.5 rounded-xl text-base font-semibold bg-white/30 hover:bg-white/50 transition shadow-lg mt-6 border-2 border-[#9233FA]"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
