
<div class="w-full flex flex-col items-center py-10 px-4 bg-gradient-to-br from-orange-50 to-purple-50 dark:from-gray-900 dark:to-gray-800 py-16 px-4 transition-colors duration-300">


<div *ngIf="toastMessage"
     class="fixed z-50 bottom-10 right-5 px-4 py-2 rounded shadow-lg transition-opacity duration-300"
     [ngClass]="{
       'opacity-0': !showToast,
       'opacity-100': showToast,
       'bg-green-500 text-white': toastType === 'success',
       'bg-red-500 text-white': toastType === 'error'
     }">
  {{ toastMessage }}
</div>

<h1 _ngcontent-ng-c1571833741="" class="text-3xl sm:text-4xl font-bold mb-3 text-gray-900 dark:text-white mb-10">My <span _ngcontent-ng-c1571833741="" class="text-amber-600 dark:text-amber-400">Profile</span></h1>

  <!-- Profile Card -->
  <div class="flex flex-col items-center w-full max-w-5xl">
    <div class="w-32 h-32 rounded-full overflow-hidden shadow-lg mx-auto">


<div class="relative w-32 h-32 rounded-full overflow-hidden shadow-lg mx-auto">

  <img [src]="profileForm.get('avatar')?.value" class="w-full h-full object-cover" alt="User" />


  <label for="avatarInput"
         class="absolute bottom-10 left-25 bg-orange-500 text-white p-2 rounded-full cursor-pointer hover:bg-orange-600 transition">
    <i class="pi pi-camera"></i>
  </label>


  <input type="file" id="avatarInput" (change)="onAvatarChange($event)" accept="image/*" class="hidden">
</div>



    </div>


    <h2 class="mt-3 text-3xl font-bold dark:text-white text-center">
      {{ profileForm.get('name')?.value || 'Your Name' }}
    </h2>

    <button
      class="mt-3 px-6 py-2 border border-orange-500 text-orange-500 rounded-lg
             hover:bg-orange-500 hover:text-white transition-all duration-300"
      (click)="toggleEdit()">
      {{ isEditing ? 'Cancel' : 'Edit my info' }}
    </button>

    <!-- Edit Form -->
    <div *ngIf="isEditing" class="mt-8 w-full bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl">
      <form [formGroup]="profileForm" class="space-y-6">

        <!-- Name -->
        <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Name</label>
          <input type="text" formControlName="name"
            class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600"
            placeholder="Enter your name" />
          <div class="text-red-500 text-sm mt-1"
               *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched">
            <div *ngIf="profileForm.get('name')?.errors?.['required']">Name is required.</div>
            <div *ngIf="profileForm.get('name')?.errors?.['pattern']">Name must be text only.</div>
          </div>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Email</label>
          <input type="email" formControlName="email"
            class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600"
            placeholder="Enter your email" />
          <div class="text-red-500 text-sm mt-1"
               *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
            <div *ngIf="profileForm.get('email')?.errors?.['required']">Email is required.</div>
            <div *ngIf="profileForm.get('email')?.errors?.['email']">Invalid email format.</div>
          </div>
        </div>
<!-- Password -->
  <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Password</label>
        <input type="password" formControlName="password"
       class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600"
       placeholder="Enter your password" />
       <div class="text-red-500 text-sm mt-1"
     *ngIf="profileForm.get('password')?.invalid && profileForm.get('password')?.touched">
  <div *ngIf="profileForm.get('password')?.errors?.['minlength']">
    Password must be at least 6 characters.
  </div>
  <div *ngIf="profileForm.get('password')?.errors?.['maxlength']">
    Password cannot exceed 20 characters.
  </div>
</div>
</div>

        <!-- Age -->
        <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Age</label>
          <input type="number" formControlName="age"
            class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600"
            placeholder="Enter your age" />
          <div class="text-red-500 text-sm mt-1"
               *ngIf="profileForm.get('age')?.invalid && profileForm.get('age')?.touched">
            <div *ngIf="profileForm.get('age')?.errors?.['required']">Age is required.</div>
            <div *ngIf="profileForm.get('age')?.errors?.['min'] || profileForm.get('age')?.errors?.['max']">
              Age must be between 5 and 120.
            </div>


          </div>
        </div>

        <!-- Habits -->
        <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Habits</label>
          <input type="text" formControlName="habits"
            placeholder="Reading, Sports, Music"
            class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600" />
          <div class="text-red-500 text-sm mt-1"
               *ngIf="profileForm.get('habits')?.invalid && profileForm.get('habits')?.touched">
            <div *ngIf="profileForm.get('habits')?.errors?.['pattern']">Please enter valid text.</div>
          </div>
        </div>

        <!-- Preferences -->
        <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Preferences</label>
          <input type="text" formControlName="preferences"
            placeholder="Early Riser, Night Owl, Quiet"
            class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600" />
          <div class="text-red-500 text-sm mt-1"
               *ngIf="profileForm.get('preferences')?.invalid && profileForm.get('preferences')?.touched">
            <div *ngIf="profileForm.get('preferences')?.errors?.['pattern']">Please enter valid text.</div>
          </div>
        </div>

        <!-- Roommate Style -->
        <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Roommate Style</label>
          <input type="text" formControlName="roommate_style"
            placeholder="Friendly, Quiet, Party"
            class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600" />
          <div class="text-red-500 text-sm mt-1"
               *ngIf="profileForm.get('roommate_style')?.invalid && profileForm.get('roommate_style')?.touched">
            <div *ngIf="profileForm.get('roommate_style')?.errors?.['required']">Roommate Style is required.</div>
            <div *ngIf="profileForm.get('roommate_style')?.errors?.['pattern']">Must be text only.</div>
          </div>
        </div>

        <!-- Cleanliness Level -->
        <div>
          <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Cleanliness Level</label>
          <input type="text" formControlName="cleanliness_level"
            placeholder="Enter a number"
            class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600" />
          <div class="text-red-500 text-sm mt-1"
               *ngIf="profileForm.get('cleanliness_level')?.invalid && profileForm.get('cleanliness_level')?.touched">
            <div *ngIf="profileForm.get('cleanliness_level')?.errors?.['required']">Cleanliness level is required.</div>
            <div *ngIf="profileForm.get('cleanliness_level')?.errors?.['pattern']">Enter a number 0-9.</div>
          </div>
        </div>
 <div>
    <!-- gender -->
            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Gender</label>
            <select formControlName="gender"
              class="w-full mb-5 p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600">
              <option value="">Select</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
            <div class="text-red-500 text-sm mt-1"
                 *ngIf="profileForm.get('gender')?.invalid && profileForm.get('gender')?.touched">
              <div *ngIf="profileForm.get('gender')?.errors?.['required']">gender field is required.</div>
            </div>
          </div>
        <!-- Smoking & Pets -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Smoking</label>
            <select formControlName="smoking"
              class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600">
              <option value="">Select</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
            <div class="text-red-500 text-sm mt-1"
                 *ngIf="profileForm.get('smoking')?.invalid && profileForm.get('smoking')?.touched">
              <div *ngIf="profileForm.get('smoking')?.errors?.['required']">Smoking field is required.</div>
            </div>
          </div>

          <div>
            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Pets</label>
            <select formControlName="pets"
              class="w-full p-4 mb-20 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600">
              <option value="">Select</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
            <div class="text-red-500 text-sm mt-1"
                 *ngIf="profileForm.get('pets')?.invalid && profileForm.get('pets')?.touched">
              <div *ngIf="profileForm.get('pets')?.errors?.['required']">Pets field is required.</div>
            </div>
          </div>
        </div>
      <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">About Me</label>

<textarea
  class="w-full h-30 p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 dark:bg-gray-700 dark:border-gray-600"
  placeholder="About me"
  formControlName="bio">
</textarea>

<div class="text-red-500 text-sm"
     *ngIf="profileForm.get('bio')?.invalid && profileForm.get('bio')?.touched">
  <div *ngIf="profileForm.get('bio')?.errors?.['required']">
    About Me field is required.
  </div>
</div>






        <!-- Buttons -->
        <div class="flex justify-end gap-4 mt-6">
          <button type="button"
            class="px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition"
            (click)="saveData()">Save</button>

          <button type="button"
            class="px-6 py-3 border border-gray-400 text-gray-600 rounded-lg hover:bg-gray-200 transition"
            (click)="toggleEdit()">Cancel</button>
        </div>

      </form>



    </div>
  </div>

  <!-- Tabs -->
<div class="flex flex-wrap justify-center gap-10 mt-10 border-b w-full max-w-4xl pb-2 text-gray-600 dark:text-gray-300">
  <button class="flex items-center gap-2 pb-2 transition"
    [ngClass]="{ 'border-b-2 border-orange-500 text-orange-500 font-semibold dark:text-orange-400': activeTab === 'favourites' }"
    (click)="changeTab('favourites')">
    â¤ï¸ Favourites
  </button>
  <button class="flex items-center gap-2 pb-2 transition"
    [ngClass]="{ 'border-b-2 border-orange-500 text-orange-500 font-semibold dark:text-orange-400': activeTab === 'about' }"
    (click)="changeTab('about')">
    ğŸ‘¤ About me
  </button>
  <button class="flex items-center gap-2 pb-2 transition"
    [ngClass]="{ 'border-b-2 border-orange-500 text-orange-500 font-semibold dark:text-orange-400': activeTab === 'roommates' }"
    (click)="changeTab('roommates')">
    ğŸ‘¥ Roommates
  </button>
  <button class="flex items-center gap-2 pb-2 transition"
    [ngClass]="{ 'border-b-2 border-orange-500 text-orange-500 font-semibold dark:text-orange-400': activeTab === 'history' }"
    (click)="changeTab('history')">
    ğŸ•˜ History
  </button>
</div>

<!-- Tab Contents -->
<!-- Tab Contents -->
<div *ngIf="activeTab === 'favourites'" class="mt-10 w-full max-w-4xl   text-gray-700 dark:text-gray-300">
  <p *ngIf="!properties || properties.length === 0" class="text-center text-gray-500 dark:text-gray-400">
    No favourites yet.
  </p>

  <!-- Grid container -->
  <div *ngIf="properties && properties.length > 0" >
  <!-- Grid container -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full">

    <article *ngFor="let item of properties"
      class="group bg-white dark:bg-gray-800 rounded-3xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-200 dark:border-gray-700 hover:border-amber-300 dark:hover:border-amber-600 w-full">

      <!-- IMAGE -->
      <div class="relative overflow-hidden  h-60 w-full">
        <img class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
             [src]="item.images && item.images.length ? item.images[0].path : 'asset/defualt.png'"
             alt="{{item.title}}">

        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

        <!-- Badges -->
        <span *ngIf="item.bills_included"
              class="absolute top-3 left-3 px-3 py-1.5 bg-green-500 text-white text-xs font-bold rounded-full shadow-lg backdrop-blur-sm flex items-center gap-1">
          âœ” Bills Included
        </span>

        <span class="absolute top-3 right-3 px-3 py-1.5 bg-blue-500 text-white text-xs font-bold rounded-full shadow-lg backdrop-blur-sm animate-pulse flex items-center gap-1">
          {{item.available_spots}} Spots Available
        </span>

        <span class="absolute bottom-3 left-3 px-3 py-1.5 bg-amber-500 text-white text-xs font-bold rounded-full shadow-lg backdrop-blur-sm">
          {{item.university}}
        </span>
      </div>

      <!-- CONTENT -->
      <div class="p-6">
        <h3 class="font-bold text-xl mb-2 text-gray-900 dark:text-white line-clamp-2 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors duration-200">
          {{item.title}}
        </h3>

        <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-1 flex items-center gap-1">
          ğŸ“ {{item.address}}
        </p>

        <!-- Quick Info -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs">
          <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center">
            <div class="text-lg mb-1">ğŸ </div>
            <div class="text-gray-700 dark:text-gray-300 font-semibold">{{item.total_rooms}} Rooms</div>
          </div>
          <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center">
            <div class="text-lg mb-1">ğŸ›</div>
            <div class="text-gray-700 dark:text-gray-300 font-semibold">{{item.bathrooms_count}} Baths</div>
          </div>
          <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center">
            <div class="text-lg mb-1">ğŸ›ï¸</div>
            <div class="text-gray-700 dark:text-gray-300 font-semibold">{{item.beds}} Beds</div>
          </div>
          <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center">
            <div class="text-lg mb-1">ğŸ‘¥</div>
            <div class="text-gray-700 dark:text-gray-300 font-semibold text-xs">{{item.accommodation_type}}</div>
          </div>
        </div>

        <!-- Tags -->
        <div class="flex flex-wrap gap-2 mb-4">
          <span *ngIf="item.gender_requirement"
                class="inline-flex items-center gap-1 px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-sm font-semibold rounded-full">
            {{item.gender_requirement}}
          </span>

          <span *ngIf="item.smoking_allowed === false"
                class="inline-flex items-center gap-1 px-3 py-1.5 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-sm font-semibold rounded-full">
            ğŸš­ No Smoking
          </span>

          <span *ngIf="item.pets_allowed"
                class="inline-flex items-center gap-1 px-3 py-1.5 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-sm font-semibold rounded-full">
            ğŸ¾ Pets Allowed
          </span>
        </div>

        <!-- Price + Button -->
        <div class="flex flex-col md:flex-row justify-between items-center pt-4 border-t border-gray-100 dark:border-gray-700 gap-4">
          <div>
            <p class="font-bold text-2xl text-amber-600 dark:text-amber-400">${{item.price}}</p>
            <span class="text-xs text-gray-500 dark:text-gray-400">/month</span>
          </div>

          <button class="bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white px-6 py-3 rounded-xl text-sm font-bold transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center gap-2">
            View Details
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
      </div>
    </article>
</div>
  </div>
</div>



<div *ngIf="activeTab === 'about'" class="mt-10  w-full max-w-3xl text-gray-700 dark:text-gray-300">
  <img [src]="profile.avatar" class="w-full h-full object-cover" alt="User" />
<div class="mt-10">
<h1 _ngcontent-ng-c1571833741="" class="text-2xl sm:text-4xl font-bold mb-3 text-gray-900 dark:text-white mb-10">About <span _ngcontent-ng-c1571833741="" class="text-amber-600 dark:text-amber-400"> Me</span></h1>
   <p class="text-lg font-bold">{{ profile?.bio || 'Add personal information here...' }}</p>
   </div>
</div>

<div *ngIf="activeTab === 'roommates'" class="mt-10 w-full max-w-3xl text-gray-700 dark:text-gray-300">
  <h3 class="text-xl font-semibold mb-4">Roommates</h3>
  <p class="text-sm">No roommates found.</p>
</div>

<div *ngIf="activeTab === 'history'" class="mt-10 w-full max-w-3xl text-gray-700 dark:text-gray-300">
  <h3 class="text-xl font-semibold mb-4">History</h3>
  <p class="text-sm">No history available.</p>
</div>

</div>
