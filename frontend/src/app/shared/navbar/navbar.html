<nav
[ngClass]="{
    'fixed top-0 left-0 w-full z-50 bg-white dark:bg-gray-900': isFixed,
    'static': !isFixed
  }"
  class="fixed top-0 left-0 w-full z-50 bg-[#852EE4] dark:bg-[#5e1fbf] backdrop-blur-md transition-colors duration-500"
>
  <div class=" mx-auto  flex items-center justify-between">

  <!-- LEFT SIDE -->
<div
  class="flex px-6 py-3 justify-start items-center w-[75%] max-w-1/2 space-x-6 lg:space-x-12
         bg-white dark:bg-gray-900
         transition-colors duration-500 ease-in-out"
>
    <!-- Logo -->
    <div class="flex items-center space-x-1">
      <span class="text-2xl font-bold text-[#DE7A18]">Rahal</span>
      <span class="w-3 h-3 mt-3 bg-[#852EE4] dark:bg-[#5e1fbf] rounded-full block"></span>
    </div>

    <!-- Desktop Menu -->
    <ul class="hidden md:flex items-center space-x-2 lg:space-x-4 text-xs font-semibold text-zinc-700 dark:text-zinc-200 uppercase">
      <li><a routerLink="/" class="hover:text-[#FA9233] dark:hover:text-white transition">Home</a></li>
      <li><a routerLink="/Roommates" class="hover:text-[#FA9233] dark:hover:text-white transition">Roommates</a></li>
      <li><a routerLink="/Recommended" class="hover:text-[#FA9233] dark:hover:text-white transition">Recommended</a></li>
      <li><a routerLink="/aboutus" class="hover:text-[#FA9233] dark:hover:text-white transition">About</a></li>
      <li><a routerLink="/contactus" class="hover:text-[#FA9233] dark:hover:text-white transition">Contact</a></li>
    </ul>
  </div>

  <!-- RIGHT SIDE -->
<div class="flex px-6 py-2 items-center space-x-4">
  <!-- Login / Register -->
  <div *ngIf="!isLoggedIn" class="hidden md:flex items-center gap-2">
    <button
      routerLink="/login"
      class="text-sm font-semibold uppercase border border-[#852EE4] text-white bg-[#852EE4] px-5 py-2 rounded-md hover:bg-[#7330d1] transition">
      Login
    </button>

    <button
      routerLink="/register"
      class="text-sm font-semibold uppercase text-white bg-[#852EE4] px-5 py-2 rounded-md hover:bg-[#7330d1] transition">
      Register
    </button>
  </div>

  <div *ngIf="isLoggedIn" class="hidden md:flex items-center gap-4">
    <!-- Notification Icon -->
    <button class="text-white p-2 rounded-full hover:bg-white/10">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
      </svg>
    </button>

    <!-- Chat Icon -->
    <button class="text-white p-2 rounded-full hover:bg-white/10">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4-.8L3 20l1.2-4.2A7.963 7.963 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
      </svg>
    </button>

    <!-- Share Icon -->
    <div class="relative">
      <button (click)="shareProfile()" class="text-white p-2 rounded-full hover:bg-white/10">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8a3 3 0 10-2.83-4H14m1 12l5 5m0 0l-5-5m5 5V10a1 1 0 00-1-1h-6" />
        </svg>
      </button>
      <div *ngIf="showShareFeedback" class="absolute -top-8 left-0 text-xs bg-white text-gray-800 px-2 py-1 rounded shadow">Copied</div>
    </div>

    <!-- User Avatar + Dropdown -->
    <div class="relative">
      <button (click)="toggleProfile()" class="focus:outline-none">
        <img [src]="avatarUrl()" alt="avatar" class="w-10 h-10 rounded-full object-cover" />
      </button>

      <div *ngIf="profileOpen" class="absolute right-0 mt-3 w-44 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50">
        <a [routerLink]="user?.role === 'owner' ? '/profile-owner' : '/profile-student'" (click)="profileOpen = false" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Profile</a>
        <button (click)="shareProfile(); profileOpen = false" class="w-full text-left block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Share</button>
        <button (click)="logout()" class="w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</button>
      </div>
    </div>
  </div>

  <!-- Theme Toggle -->
  <button (click)="theme.toggle()" class="text-zinc-700 dark:text-zinc-200 cursor-pointer">
    @if (themeSignal() === 'light') {
      <!-- Sun -->
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 3v1m0 16v1m8.66-8.66h1M4.34 12H3m15.36 6.36l.7.7M6.34 6.34l-.7-.7m12.02 0l.7-.7M6.34 17.66l-.7.7M12 8a4 4 0 100 8 4 4 0 000-8z"/>
      </svg>
    } @else {
      <!-- Moon -->
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/>
      </svg>
    }
  </button>

  <!-- Mobile Menu Button -->
  <button (click)="toggleMenu()" class="md:hidden text-black dark:text-white">
    @if (!menuOpen) {
      <!-- Menu Icon -->
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    } @else {
      <!-- Close Icon -->
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    }
  </button>
</div>

</div>


  <!-- Mobile Menu -->
  @if (menuOpen) {
    <div class="md:hidden bg-white dark:bg-[#0a0a0a] border-t border-zinc-200 dark:border-black px-6 py-4">
      <ul class="flex flex-col space-y-4 text-zinc-700 dark:text-zinc-200 uppercase text-sm font-semibold">
        <a routerLink="/" class="hover:text-[#FA9233] dark:hover:text-white transition">Home</a>
        <a routerLink="/Roommates" class="hover:text-[#FA9233] dark:hover:text-white transition">Roommates</a>
        <a routerLink="/about" class="hover:text-[#FA9233] dark:hover:text-white transition">About</a>

        <a routerLink="/contactus" class="hover:text-[#FA9233] dark:hover:text-white transition">Contact</a>

              <!-- Login + Register inside mobile -->
              <ng-container *ngIf="!isLoggedIn">
                <button
                  routerLink="/login"
                  class="border border-zinc-500 text-black dark:text-white px-5 py-2 rounded-md hover:bg-[#852EE4] dark:bg-[#5e1fbf]  hover:text-white dark:hover:text-black transition">
                  Login
                </button>

                <button
                  routerLink="/register"
                  class="bg-[#852EE4] dark:bg-[#5e1fbf] text-white dark:text-black px-5 py-2 rounded-md hover:opacity-90 transition">
                  Register
                </button>
              </ng-container>

              <ng-container *ngIf="isLoggedIn" class="flex flex-col space-y-2">
                <div class="flex items-center space-x-3">
                  <button class="p-2 rounded-full bg-gray-100 dark:bg-gray-900">
                    <!-- small bell -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                    </svg>
                  </button>
                  <a [routerLink]="user?.role === 'owner' ? '/profile-owner' : '/profile-student'">
                    <img [src]="avatarUrl()" alt="avatar" class="w-10 h-10 rounded-full object-cover" />
                  </a>
                </div>
              </ng-container>
      </ul>
    </div>
  }
</nav>
